<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="CleverStack, the Enterprise-grade, Open-Source Full-Stack JavaScript Framework built on NodeJS and Angular, MEAN and so much more!">
<meta name="keywords" content="HTML, CSS, JS, JavaScript, framework, bootstrap, front-end, frontend, web development, node.js, express, mongoose, mongodb, angularjs, swig, sequelize, sequelizejs, orm, odm, cli">
<meta name="author" content="Richard Gustin and contributors to the CleverStack Repositories">

<title>
  
    Backend Documenation &middot; CleverStack.io
  
</title>

<!-- Bootstrap core CSS -->
<link href="/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Theme CSS -->
<link href="/dist/css/bootstrap-theme.min.css" rel="stylesheet">

<!-- Application CSS -->
<link href="/dist/css/application.min.css" rel="stylesheet">


<!-- Documentation extras -->
<link href="/assets/css/docs.css" rel="stylesheet">
<link href="/assets/css/pygments-manni.css" rel="stylesheet">
<!--[if lt IE 9]><script src="/assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="shortcut icon" href="/assets/ico/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="/assets/ico/apple-touch-icon.png" />
<link rel="apple-touch-icon" sizes="57x57" href="/assets/ico/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon" sizes="72x72" href="/assets/ico/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon" sizes="76x76" href="/assets/ico/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" sizes="114x114" href="/assets/ico/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon" sizes="120x120" href="/assets/ico/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" sizes="144x144" href="/assets/ico/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon" sizes="152x152" href="/assets/ico/apple-touch-icon-152x152.png" />

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48107165-1', 'cleverstack.io');
  ga('send', 'pageview');
  var tag = document.createElement('script');  tag.src = "http://www.youtube.com/player_api";  var firstScriptTag = document.getElementsByTagName('script')[0];  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  </script>

  </head>
  <body>
    <a class="sr-only" href="#content">Skip to main content</a>

    <div class="github-ribbon">
       <a href="https://github.com/cleverstack/"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
    </div>

    <!-- Docs master nav -->
    <header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-brand">CleverStack.io</a>
    </div>
    <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
      <ul class="nav navbar-nav">
        <li>
          <a href="/getting-started">Getting started</a>
        </li>
        <li>
          <a href="/why-cleverstack">Why cleverstack?</a>
        </li>
        <li>
          <a href="/modules">Modules</a>
        </li>
        <li>
          <a href="/documentation">Documentation</a>
        </li>
<!--         <li>
          <a href="/css">CSS</a>
        </li>
        <li>
          <a href="/components">Components</a>
        </li>
        <li>
          <a href="/javascript">JavaScript</a>
        </li>
        <li>
          <a href="/customize">Customize</a>
        </li> -->
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/about">About</a>
        </li>
      </ul>
    </nav>
  </div>
</header>


    <!-- Docs page layout -->
    <div class="bs-header" id="content">
      <div class="container">
        <h1>Backend Documenation</h1>
        <p>Indepth guides for CleverStack's Backend covering installation, configuration, usage and extending.</p>
      </div>
    </div>

    <!-- Callout for the old docs link -->
    <!-- <div class="bs-old-docs">
  <div class="container">
    <strong>
      <a href="/2.3.2/">Looking for Bootstrap 2.3.2 docs?</a>
    </strong>
    We've moved it to a new home while we push forward with Bootstrap 3. <a href="http://blog.getbootstrap.com/">Read the blog</a> for details.
  </div>
</div>
 -->

    <div class="container bs-docs-container">

      <div class="row">
        <div class="col-md-3">
          <div class="bs-sidebar hidden-print" role="complementary">
            <ul class="nav bs-sidenav">
              
                <li><a href="#backend-introduction">Introduction</a></li>
<li><a href="#backend-installation">Installation</a></li>
<li><a href="#backend-configuration">Configuration</a></li>
<li><a href="#backend-project-structure">Structure</a></li>
<li><a href="#backend-core-components">Core Components</a>
  <ul class="nav nav-nest">
    <li><a href="/documentation/backend/classes">Classes</a></li>
    <li><a href="/documentation/backend/modules">Modules</a>
    <li><a href="/documentation/backend/controllers">Controllers</a>
    <li><a href="/documentation/backend/services">Services</a>
    <li><a href="/documentation/backend/models">Models</a>
  </ul>
</li>
<li><a href="#backend-magic-modules">Magic Modules</a></li>
<li><a href="#backend-di">Dependency Injection</a></li>
<li><a href="#backend-troubleshooting">Troubleshooting</a></li>
<li><a href="#testing">Running Tests</a>
  <ul class="nav">
    <li><a href="#testing-unit">Running Unit Tests</a></li>
    <li><a href="#testing-e2e">Running E2E Tests</a></li>
    <li><a href="#testing-coverage">Code Coverage Reports</a></li>
  </ul>
</li>
<li>
  <a href="#deployment">Build &amp; Deployment</a>
  <ul class="nav">
    <li><a href="#deployment-build">Production Builds</a></li>
    <li><a href="#deployment-strategies">Deployment Strategies</a></li>
  </ul>
</li>
              
            </ul>
          </div>
        </div>
        <div class="col-md-9" role="main">
            <!-- Back-end (NodeJS)
  ================================================== -->
  <div class="bs-docs-section">
    <h1 id="backend" class="page-header">
  CleverStack NodeJS Backend <a class="permalink" href="/documentation/backend" title="Permalink"><small>¶</small></a>
</h1>
<ol class="breadcrumb">
  <li><a href="/documentation">Documentation</a></li>
  <li class="active">Backend</li>
</ol>

<!-- Goals
================================================== -->
<p class="lead">Developers all over the world for years have been striving to be able to create smarter, smaller, easier to manage, faster to develop, re-usable chunks of code that are as modular as possible without sacrificing code quality or developer sanity.</p>

<p>CleverStack set out to accomplish this and create the worlds first Modular Full Stack JS Framework, with the Architecture designed by <a href="https://github.com/pilsy">Richard Gustin</a> and his role as Lead working with a <a href="/about/#team">group of highly skilled developers</a> we believe that we accomplished this task.</p>

<p>What this mean's for you is, you are able to create smaller, more specific modules that are extremely powerful, completely self contained and can be used between many projects. If you believe your module is useful you can publish your module to the CleverStack EcoSystem through NPM (Backend) or Bower (Frontend).</p>

<p>In an attempt to keep our code as DRY as possible, whenever it is possible to use an already built NPM Package we will use that module instead of writing our own code to handle a problem that already has a viable solution. Examples of this is our use of SequelizeJS (ORM) and MongooseJS (ODM), our use of Grunt, and our use of frameworks such as express.</p><br/><br/>

<!-- Introduction
================================================== -->
<h3 id="backend-introduction" class="page-header">
  Introduction <a class="permalink" href="/documentation/backend/#backend-introduction" title="Permalink"><small>¶</small></a>
</h3>
<ol class="breadcrumb">
  <li><a href="/documentation">Documentation</a></li>
  <li><a href="/documentation/backend">Backend</a></li>
  <li class="active">Introduction</li>
</ol>

<p class="lead sub">CleverStack's Backend (Node Seed) has been designed to provide you with a super fast test driven back-end development lifecycle. Everything you need should be just one command away, if it's not please open an issue or fork the repo on github and submit a pull request.</p>

<h5 class="page-header">Highlights</h5>
<ul>
  <li><a href="http://nodejs.org/api/cluster.html">Clustered,</a> enterprise application with high <a href="http://en.wikipedia.org/wiki/Concurrency_(computer_science)">Concurrency</a> out of the box.</li>
  <li>Asynchronous, <a href="http://nodejs.org/">NodeJS</a> Powered Non-Blocking Core.</li>
  <li>Modular Architecture with Open Source Eco System for modules.</li>
  <li>MEAN Stack and so much more! (Mongo, Express, Angular, Node)</li>
  <li>Official ODM (<a href="http://css.dzone.com/articles/era-object-document-mapping">Object Document Mapper</a>) Module provides an enterprise <a href="http://en.wikipedia.org/wiki/NoSQL">NoSQL</a> based solution out of the box.</li>
  <li>Official ORM (<a href="http://en.wikipedia.org/wiki/Object-relational_mapping">Object Relational Mapper</a>) Module provides an enterprise <a href="http://en.wikipedia.org/wiki/SQL">SQL</a>  based solution out of the box.</li>
  <li>Databases supported: <a href="http://www.mysql.com/">MySQL</a>, MariaDB, <a href="http://www.postgresql.org/">PostgreSQL</a>, <a href="http://www.sqlite.org/">SQLite</a> or <a href="http://www.mongodb.org/">MongoDB</a>.</li>
  <li>CLI Commands available to help ease your workload (including generators)</li>
  <li><a href="http://gruntjs.com/">Grunt</a> powered tasks, including Server with Live Restart using <a href="https://www.npmjs.org/package/nodemon">nodemon.</a></li>
  <li>NodeJS <a href="https://github.com/CleverStack/clever-background-tasks">Background Tasks Module</a> which allows CPU intensive (blocking) operations to take place in separate processes, allowing your HTTP Web Server Processes to continue serving HTTP Requests.</li>
  <li>Unit &amp; E2E (Integration) Testing with <a href="https://www.npmjs.org/package/mocha">Mocha</a> and <a href="https://www.npmjs.org/package/request">Request</a>.</li>
  <li>Code Coverage reports for E2E and Unit test/s.</li>
  <li>Powerful database rebase and seed tools for Rapid Application Development</li>
</ul><br/><br/>

<!-- Installation
================================================== -->
<h3 id="backend-installation" class="page-header">
  Installation <a class="permalink" href="/documentation/backend/#backend-installation" title="Permalink"><small>¶</small></a>
</h3>
<ol class="breadcrumb">
  <li><a href="/documentation">Documentation</a></li>
  <li><a href="/documentation/backend">Backend</a></li>
  <li class="active">Installation</li>
</ol>

<p>Controllers are the thing that directly responds to each HTTP Request that comes into your application, as such each web request will result in (if routed) a new instance of a Controller (Class).</p>
<p>Avoid callback soup/hell and promise slowdown by using this.proxy() or this.callback() in the Static section of the Controller, this keeps code nesting to a minimum and brings code re-use up. Instead of passing around req and res as arguments like other less organized solutions, in CleverStack they are exposed as this.req and this.res</p><br/><br/>

<!-- Configuration
================================================== -->
<h3 class="page-header" id="backend-configuration">
  Configuration <a class="permalink" href="#backend-configuration" title="Permalink"><small>¶</small></a><br/>
  <small>Sophisticated deep-merged configuration allows ultimate flexibility between environments</small>
</h3>
<ol class="breadcrumb">
  <li><a href="#overview">Documentation</a></li>
  <li><a href="#backend">Backend</a></li>
  <li class="active">Configuration</li>
</ol>
<p class="lead sub">To make configuration as easy and comprehensive as possible, you are not only able to define a global.json configuration file, you can also define configuration files for each environment regardless of what you call them.</p>

<blockquote>
  <h6>If you’re willing to restrict the flexibility of your approach, you can almost always do something better.</h6>
  <footer style="font-size: 12px;">John Carmack</footer>
</blockquote>
<br/>

<p>Consider the following code, which uses a "Magic Module" to load the json configuration files and deeep merge them</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">config</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span> <span class="s1">&#39;config&#39;</span> <span class="p">)</span></code></pre></div>

<h5 class="page-header">Loading Order</h5>
<p>Each of the following files are loaded and then deep merged into one application config object, in the exact order listed here.</p>
<ol>
  <li><a href="https://github.com/CleverStack/Node-Seed/tree/master/config/global.json">/config/global.json</a>
    <ul>
      <li>
        Define the global configuration for your application here.
        <div class="bs-callout bs-callout-danger">
          <h4>Required for configuration</h4>
          <p>This file is required and must exist, as this is the place for any default (or GLOBAL) configuration. Don't Delete!</p>
        </div>
      </li>
    </ul>
  </li>
  <li>/modules/&lt;module&gt;/config/default.json
    <ul>
      <li>
        Every modules /config/default.json file will be loaded in the order specified in the <a href="https://www.npmjs.org/doc/json.html">bundledDependencies[]</a> array in your package.json
        <div class="bs-callout bs-callout-info">
          <h4>Module's default.json</h4>
          <p>See <a href="#backend-modules-config-default">&lt;module&gt;/config/default.json</a> for more information</p>
        </div>
      </li>
    </ul>
  </li>
  <li>/modules/&lt;module&gt;/config/global.json
    <ul>
      <li>
        Every modules /config/global.json file will be loaded in the order specified in the <a href="https://www.npmjs.org/doc/json.html">bundledDependencies[]</a> array in your package.json
        <div class="bs-callout bs-callout-info">
          <h4>Module's global.json</h4>
          <p>See <a href="#backend-modules-config-global">&lt;module&gt;/config/global.json</a> for more information</p>
        </div>
      </li>
    </ul>
  </li>
  <li>/config/&lt;NODE_ENV&gt;.json <strong>(environment specific configuration)</strong>
    <ul>
      <li>This allows you to modify or extend the configuration for each environment, regardless of what name you give an environment.</li>
        <div class="bs-callout bs-callout-info">
          <h4>Default Environment Names</h4>
          <p>The default environment names are, LOCAL, DEV, STAG and PROD.</p>
        </div>
        <div class="bs-callout bs-callout-danger">
          <h4>Environment Specific Configuration</h4>
          <p>To take advantage of an environment based configuration file, you need to set an Environment Variable called <code>NODE_ENV</code> to the name you called your environment. (We use <code>NODE_ENV=LOCAL</code> for local development).</p>
        </div>
      </li>
    </ul>
  </li>
</ol><br/><br/>

<!-- Structure
================================================== -->
<h3 id="backend-project-structure" class="page-header">
  Structure <a class="permalink" href="#backend-structure" title="Permalink"><small>¶</small></a><br/>
  <small>Cleverstacks's Architecture has been designed to be simple and intiutive to use and extend.</small><br/>
</h3>
<ol class="breadcrumb">
  <li><a href="#overview">Documentation</a></li>
  <li><a href="#backend">Backend</a></li>
  <li class="active">Structure</li>
</ol>
<!-- <p class="lead sub">Cleverstack provides a clear and simple structure that will make writing even the most (seemingly) complex applications trivial.</p> -->

<blockquote>
  <h6>Complexity kills. It sucks the life out of developers, it makes products difficult to plan, build and test, it introduces security challenges and it causes end-user and administrator frustration.</h6>
  <footer style="font-size: 12px;">Ray Ozzie</footer>
</blockquote>

<h5 class="page-header">Folder Structure</h5>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">node-seed/
├── config/           <span class="c"># configuration files</span>
├── lib/              <span class="c"># cleverstack core</span>
├── modules/          <span class="c"># backend modules</span>
├── tests/            <span class="c"># global app and cleverstack core tests</span>
│   ├── e2e/          <span class="c"># end to end tests</span>
│   └── unit/         <span class="c"># unit tests</span>
├── Gruntfile.js      <span class="c"># app grunt config &amp; tasks</span>
├── cluster.js        <span class="c"># runs a clustered server with multiple app.js workers</span>
├── app.js            <span class="c"># runs a single node http server</span>
└── package.json      <span class="c"># npm dependencies and package information</span></code></pre></div>

<h5 class="page-header">Important files and folders</h5>
<dl class="dl-horizontal">
  <dt><a href="https://github.com/CleverStack/Node-Seed/tree/master/config">config/</a></dt>
  <dd>This is where you define all of your configuration files like your global.json and for each of your environments (default is local, dev, stag, prod), see <a href="#backend-configuration">Configuration</a> for more information.</dd><br>

  <dt><a href="https://github.com/CleverStack/Node-Seed/tree/master/lib">lib/</a></dt>
  <dd>
    <p>This is where the Cleverstack Core is kept, we recommended not modifying anything in this this folder unless you know what you are doing.</p>

    <div class="bs-callout bs-callout-info">
      <h4>Magic Modules</h4>
      <p>Certain folders are magic modules and can be required in like <code>require( 'models' )</code>, this is made possible by the use of the NODE_PATH variable.</p>
    </div>

    <div class="bs-callout bs-callout-danger">
      <h4>Modification warning</h4>
      <p>
        If you modify files in this folder, then it is highly likely things may not work if you do not know what you are doing. It is also important to remember that making changes in here makes it hard to upgrade or downgrade your backend without loosing your changes.
      </p>
    </div>
  </dd>

  <dt><a href="https://github.com/CleverStack/Node-Seed/tree/master/modules">modules/</a></dt>
  <dd>
    <p>This is where all of the Cleverstack modules will be installed into your application.</p>
    <p>You also add custom modules inside this folder, either by creating it manually or using the CleverStack CLI's install, generate or scaffold commands.</p>

    <div class="bs-callout bs-callout-info">
      <h4>NPM Modules/Packages</h4>
      <p>You can place any NPM module inside this directory, however to take advantage of the true power &amp; flexibility of CleverStack you will need to add and change some key (but easy) points.</p>
        <p><span class="label label-warning">Example</span> See the <a href="https://github.com/CleverStack/backend-example-module">Backend Example Module</a> for an example of how to create a cleverstack enhanced module.</p>
    </div>
  </dd>

  <dt><a href="https://github.com/CleverStack/Node-Seed/tree/master/cluster.js">cluster.js</a></dt>
  <dd>
    <p>This is the main entry point of a normal CleverStack "Clustered" Application, in most cases you will not need to modify this file.</p>
    <div class="bs-callout bs-callout-info">
      <h4>Module <code>bin/cluster.js</code> Hook</h4>
      <p>By placing a file in any modules <code>/modules/:moduleName/bin/</code> folder called <code>cluster.js</code> you are able to "hook into" when your cluster starts, it will be loaded and run before the cluster.js file is executed, (Example: If the background-tasks module is installed and enabled, this type of hook will setup the background task process.)</p>
      <p><span class="label label-warning">Example</span> See the <a href="https://github.com/CleverStack/clever-background-tasks/blob/master/bin/cluster.js">Clever Background Tasks cluster.js hook</a> for an example of how you can use this feature.</p>
    </div>
  </dd>

  <dt><a href="https://github.com/CleverStack/Node-Seed/tree/master/Gruntfile.js">Gruntfile.js</a></dt>
  <dd>
    <ul>
      <li>Defines the Applications global (main) gruntConfig.</li>
      <li>Registers the Applications included Grunt tasks.</li>
      <li>Provides an easy mechanism for modules to extend the gruntConfig and register/modify grunt tasks.</li>
    </ul>

    <div class="bs-callout bs-callout-warning">
      <h4>Module Gruntfile's</h4>
      <p>Each module's Gruntfile.js config is deep merged into this files main grunt config before registering any tasks with grunt, which gives you the power to both add grunt tasks and modify the gruntConfig inside each module.</p>
    </div>
  </dd>

  <dt><a href="https://github.com/CleverStack/Node-Seed/tree/master/index.js">index.js</a></dt>
  <dd>
    <p>This files main use is the entry point of each HTTP Web Serving child process within the "Clustered" environment that app.js provides.</p>

    <div class="bs-callout bs-callout-danger">
      <h4>Debugging</h4>
      <p>You can use this script to spawn a single processed Application, useful for debugging with node-inspector so it will attach to the process by using --debug-brk.</p>
      <p><span class="label label-danger">Important</span> To run this file on its own you will need to manually set your NODE_PATH to <code>./lib/:./modules/</code> for linux and <code>./lib/;./modules/</code> for windows.</p>
    </div>
  </dd>

  <dt><a href="https://github.com/CleverStack/Node-Seed/tree/master/package.json">package.json</a></dt>
  <dd>
    <p>This file defines the Application and it's information, scripts and NPM dependencies just like every other NPM Module.</p>

    <div class="bs-callout bs-callout-info">
      <h4>Enabling Modules ( bundledDependencies[] )</h4>
      <p>This is where you define which CleverStack Modules are Enabled, and what order they are loaded in by the Module Loader.</p>
      <p>By adding modules into the <a href="https://www.npmjs.org/doc/json.html">bundledDependencies[]</a> array in the projects package.json file, you are also letting NPM know that these dependencies are local and not on the NPM Registry, meaning NPM will never search or download those modules from the internet.</p>
      <span class="label label-info">Note</span> The order in which you place modules inside your <a href="https://www.npmjs.org/doc/json.html">bundledDependencies[]</a> array will be the loading order of the modules.
    </div>
  </dd>
</dl><br/><br/>

<!-- Core Components
================================================== -->
<h3 class="page-header" id="backend-core-components">
	Core Components <a class="permalink" href="#backend-core-components" title="Permalink"><small>¶</small></a><br/>
	<small>Backend Classes, Modules, Controllers, Services and Models</small>
</h3>
<ol class="breadcrumb">
  <li><a href="#overview">Documentation</a></li>
  <li><a href="#backend">Backend</a></li>
  <li class="active">Core Components</li>
</ol>

<ul>
  <li><a href="/documentation/backend/classes">Classes</a></li>
  <li><a href="/documentation/backend/modules">Modules</a>
  <li><a href="/documentation/backend/controllers">Controllers</a>
  <li><a href="/documentation/backend/services">Services</a>
  <li><a href="/documentation/backend/models">Models</a>
</ul><br/><br/>

<!-- Magic Modules
================================================== -->
<h3 class="page-header" id="backend-magic-modules">Magic Modules</h3>
<p>Our NodeJS Backend takes advantage of an NPM feature called the Node Path, by using the environment variable NODE_PATH.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">export </span><span class="nv">NODE_PATH</span><span class="o">=</span>./lib/:./modules/</code></pre></div>

<p><span class="label label-danger">Important</span> You only need to set your NODE_PATH when you are running index.js, not the main servers or commands.</p><br/>

<p>Using the Node Path and our magic module utility it gives you the ability to load things, like this</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">$</span> <span class="nx">require</span><span class="p">(</span> <span class="s1">&#39;controllers&#39;</span> <span class="p">).</span><span class="nx">ExampleController</span></code></pre></div>

<h5>Here is the complete list of Magic Modules, you can require() any of these anywhere in your application.</h5>
<ul>
<li>injector</li>
<li>classes</li>
<li>config</li>
<li>controllers</li>
<li>exceptions</li>
<li>models</li>
<li>seedData</li>
<li>services</li>
<li>tasks</li>
<li>utils</li>
</ul><br/>

<!-- Dependency Injection
================================================== -->
<h3 class="page-header" id="backend-di">
	Dependency Injection <a class="permalink" href="#backend-di" title="Permalink"><small>¶</small></a><br/>
	<small>Asynchronous and fully Non-blocking dependency injection for Node (based on AngularJS)</small>
</h3>
<ol class="breadcrumb">
  <li><a href="#overview">Documentation</a></li>
  <li><a href="#backend">Backend</a></li>
  <li class="active">Dependency Injection</li>
</ol>

<blockquote>
	<h6>The unavoidable price of reliability is simplicity.</h6>
	<footer style="font-size: 12px;">C.A.R. Hoare</footer>
</blockquote>

<h5 class="page-header">Features</h5>
<ul>
  <li>Non-blocking and fully async</li>
  <li>Load's resources based upon name for you and injects dependencies</li>
  <li>Will never load the same resource more than once, it uses the one singular instance for all dependencies</li>
</ul>
<br>

<p>CleverStack Controllers, Services, Routes, Models and Tests are loaded and all of their dependencies are loaded and injected automatically using the <a href="https://github.com/cleverstack/clever-injector">CleverStack Dependency Injection</a> module.</p>

<p>When resources/files are loaded using the injector it will automatically load and inject any of it's dependencies in a recursive manner.</p>

<h5 class="page-header">Example Usage</h5>

<p>Simply put the name of the dependency you need in the function exported by the file and it will be loaded and injected for you automatically.</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span> <span class="nx">SomeDependency</span> <span class="p">)</span> <span class="p">{</span>
  <span class="c1">// SomeDependency is loaded and injected into this function for you</span>
<span class="p">}</span></code></pre></div><br/><br/>

<h3 class="page-header" id="backend-modules">Classes</h3><br/><br/>
<h3 class="page-header" id="backend-modules">Modules</h3><br/><br/>
<h3 class="page-header" id="backend-modules">Controllers</h3><br/><br/>
<h3 class="page-header" id="backend-modules">Services</h3><br/><br/>
<h3 class="page-header" id="backend-modules">Models</h3><br/><br/>


<!-- Troubleshooting
================================================== -->
<h3 class="page-header" id="backend-troubleshooting">Troubleshooting</h3>
<p>If you have any problems (including errors, exceptions and even general usage) with the NodeJS Backend which is called the Node Seed.</p>
<ul>
  <li>Because we use the <a href="https://www.npmjs.org/package/debug">debug</a> npm module, set an environment variable called DEBUG.</li>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">// There are more, <span class="k">if</span> you want to debug a file look <span class="k">for</span> its debug definition and add it in here
<span class="nv">$ </span><span class="nb">export </span><span class="nv">DEBUG</span><span class="o">=</span>moduleLoader,ModuleClass,ORM

// Run the server
<span class="nv">$ </span>clever serve
Running <span class="s2">&quot;nodemon:web&quot;</span> <span class="o">(</span>nodemon<span class="o">)</span> task
<span class="o">[</span>nodemon<span class="o">]</span> v1.0.20
<span class="o">[</span>nodemon<span class="o">]</span> to restart at any <span class="nb">time</span>, enter <span class="sb">`</span>rs<span class="sb">`</span>
<span class="o">[</span>nodemon<span class="o">]</span> watching: *.*
<span class="o">[</span>nodemon<span class="o">]</span> starting <span class="sb">`</span>node app.js<span class="sb">`</span>
moduleLoader Loading modules... +0ms
moduleLoader Loading the clever-orm module +4ms
MagicModule Creating magic module <span class="k">for</span> classes +0ms
MagicModule Loading ModuleClass into classes magic module... +1ms
ORM Opening connection to database +0ms
moduleLoader Loading the backend-example-module module +271ms
ORM Loading model ExampleModel from backend-example-module/models/orm/ExampleModel.js +25ms
MagicModule Creating magic module <span class="k">for</span> services +306ms
MagicModule Loading BaseService into services magic module... +1ms
MagicModule Loading Controller into classes magic module... +14ms
moduleLoader modulesLoaded <span class="o">(</span>hook<span class="o">)</span> <span class="k">for</span> module clever-orm +68ms
ORM Defining model assocations +58ms
moduleLoader Initializing the clever-orm modules routes. +116ms
moduleLoader Initializing the backend-example-module modules routes. +0ms
Starting server on port <span class="m">8080</span> in LOCAL mode</code></pre></div>

  <li>Check the Github <a href="https://github.com/CleverStack/Node-Seed/issues">issues page</a>.</li>
  <li>Log into the public access <a href="https://www.hipchat.com/gwM43u4Mw">HipChat Room</a> and ask for help.</li>
  <li>Get some help from the Cleverstack <a href="https://groups.google.com/forum/#!forum/clever-stack">Google Group</a></li>
  <li>If your still having problems, please <a href="https://github.com/CleverStack/Node-Seed/issues/new">raise an issue</a>.</li>
</ul>

<!-- Testing
================================================== -->
<h4 class="page-header" id="testing">Testing</h4>
<p>Modules contain their testing resources, here are the two types you can use</p>
<br/>

<h5>Unit Tests</h5>

<p>Here is an in-depth example of how to write a unit test</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Coming soon</span></code></pre></div><br/>

<h5 class="page-header">Integration / e2e Tests</h5>

<p>There is no required code, all you need to do is use request to make http requests to your controllers. Here is an example</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Coming soon</span></code></pre></div>
<ol class="breadcrumb">
  <li><a href="#">Home</a></li>
  <li><a href="#">Library</a></li>
  <li class="active">Data</li>
</ol>
<br/>

<!-- Contributing
================================================== -->
<h3 class="page-header" id="backend-contributing">Contributing</h3>
<p>Firstly please read our <a href="https://github.com/CleverStack/Node-Seed/blob/master/CONTRIBUTING.md">guidelines for contributing</a>, Then fork the <a href="https://github.com/CleverStack/Node-Seed">CleverStack Node Seed</a> github repo, once you are ready please submit a "Pull Request" for review.</p>
  </div>

  <!-- Testing
  ================================================== -->
  <div class="bs-docs-section">
    <div class="page-header">
      <h1 id="testing">Testing</h1>
    </div>
    <p class="lead">At Clevertech we believe in testing our code as we develop, then if something breaks we know exactly where to start looking. Spending more time on developing the features we love.</p>

    <h3 id="testing-unit">Running Unit Tests</h3>
    <p>To run the unit tests for your app and modules, from the front-end/back-end root directory run:</p>
    <div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>clever <span class="nb">test </span>unit</code></pre></div>
    <p>Or simply use the alias:</p>
    <div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>clever <span class="nb">test</span></code></pre></div>

    <h3 id="testing-e2e">Running E2E Tests</h3>
    <p>To setup your environment for e2e testing with Protractor run the following command. This will install Selenium Server (WebDriver), ChromeDriver & PhantomJS based on your OS. If you wish to run selenium server in a separate terminal then use Webdriver Manager (see below).</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cd </span>Frontend
<span class="nv">$ </span>npm run-script setup-protractor</code></pre></div>

    <h3>Using Webdriver Manager</h3>
    <p>Webdriver Manager comes shipped with protractor and installs selenium server & chrome driver for you. Selenium server can then run in a separate terminal so when you run your e2e tests it doesn't need to boot up (saving heaps of time when running your e2e tests!). To set this up do the following:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">npm install -g protractor
webdriver-manager update
webdriver-manager start</code></pre></div>

    <p>Your selenium server should be running in this terminal.</p>
    <p>Finally update your e2e test config file located: my-app/Frontend/test-e2e.conf.js</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">// uncomment this line:
seleniumAddress: <span class="s1">&#39;http://localhost:4444/wd/hub&#39;</span>,

// comment these lines:
seleniumServerJar: <span class="s1">&#39;&#39;</span>
seleniumPort: <span class="s1">&#39;&#39;</span>
chromeDriver: <span class="s1">&#39;&#39;</span></code></pre></div>

    <p>To run the end-to-end tests for your app and modules, from the front-end/back-end root directory run:</p>
    <div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>clever <span class="nb">test </span>e2e</code></pre></div>

    <h3 id="testing-coverage">Code Coverage Reports</h3>
    <p>To generate a code coverage report for your unit tests, from the front-end directory run:</p>
    <div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>clever <span class="nb">test </span>coverage</code></pre></div>
    <p>Your browser should open the following URL:</p>
    <div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>http://localhost:5555</code></pre></div>
    <p>Then select your report from the list.</p>

  </div>

  <!-- Deployment
  ================================================== -->
  <div class="bs-docs-section">
    <div class="page-header">
      <h1 id="deployment">Deployment</h1>
    </div>
    <p class="lead">At Clevertech we build lots of MVP's so we like our deployment to be as efficient as possible. We are going to implement some of these strategies for CleverStack.</p>

    <h3 id="deployment-build">Production Builds</h3>
    <p>To build a production version of your front-end app, from your front-end root directory run:</p>
    <div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>clever build</code></pre></div>
    <p>This will build your app, minifying your assets etc and puts everything into the /dist folder ready for deployment.</p>
    <p>Note: You can view a production version of your app on port 9009.</p>

    <h3 id="deployment-strategies">Deployment Strategies</h3>
    <p>Stay Tuned!! NodeJS deployment strategies coming soon. AWS, Heroku and more.</p>
  </div>

  <!-- Troubleshooting
  ================================================== -->
  <div class="bs-docs-section">
    <div class="page-header">
      <h1 id="troubleshooting">Troubleshooting</h1>
    </div>
    <h4><a href="#cli-troubleshooting">Troubleshooting CleverStack CLI.</a></h4>
    <h4><a href="#backend-troubleshooting">Troubleshooting Backend (NodeJS).</a></h4>
    <h4><a href="#frontend-troubleshooting">Troubleshooting Frontend (AngularJS).</a></h4><br>
    <h4><a href="https://groups.google.com/forum/#!forum/clever-stack">Get some help from the Google Group</a></h4><br>

    <p class="lead">We will document any "gotchas" here along with any important open GitHub issues. Please <a href="https://github.com/CleverStack/cleverstack/issues">open an issue</a> if you see a bug.</p></p>
    <ul>
      <li>EMFILE error on Mac: By default some macs have a ulimit of 256 which limits the number of open files each process can have, when using "clever init my-app" you will need to raise your ulimit by running "ulimit -n 1024" in your console. You will need to run that in your console before running the init command unless you define that setting globally in your mac.</li>
    </ul>
  </div>

  <!-- FAQ
  ================================================== -->
  <div class="bs-docs-section">
    <div class="page-header">
      <h1 id="faq">FAQ</h1>
    </div>
    <p class="lead">Answers to some frequently asked questions about CleverStack. Please <a href="https://github.com/CleverStack/cleverstack/issues">open an issue</a> if you are requesting a new feature.</p>

    <p>We will add important FAQ here.</p>
  </div>

        </div>
      </div>

    </div>

    <footer class="container text-center padtop" role="contentinfo">
      <p class="legal">Cleverstack.io is developed and maintained by <a href="http://au.linkedin.com/in/richardgustin" target="_blank">Richard Gustin</a> (<a href="https://github.com/pilsy" target="_blank">@pilsy</a>),<br/>our core developers, our open source community and <a href="http://www.clevertech.biz/" target="_blank">Clevertech</a>.<br/>2015 Cleverstack.io All Rights Reserved.</p>
    </footer>

    <!-- JS and analytics only. -->
    <!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="/dist/js/bootstrap.min.js"></script>

<!-- <script src="/assets/js/holder.js"></script> -->
<!-- <script src="/dist/js/application.min.js"></script> -->
<script src="/assets/js/application.js"></script>






<script>
  window.twttr = (function (d,s,id) {
    var t, js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return; js=d.createElement(s); js.id=id; js.async=1;
    js.src="https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
    return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
  }(document, "script", "twitter-wjs"));
</script>

<!-- Analytics
================================================== -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-48107165-1', 'cleverstack.io');
  ga('send', 'pageview');

  // var _gauges = _gauges || [];
  // (function() {
  //   var t   = document.createElement('script');
  //   t.async = true;
  //   t.id    = 'gauges-tracker';
  //   t.setAttribute('data-site-id', '4f0dc9fef5a1f55508000013');
  //   t.src = '//secure.gaug.es/track.js';
  //   var s = document.getElementsByTagName('script')[0];
  //   s.parentNode.insertBefore(t, s);
  // })();
</script>


  </body>
</html>
